/*
 angularbknd v0.9.1 
 (c) Copyright 2014 Backand All rights reserved. https://backand.com 
 License: MIT
 */
var backand={options:{url:"",version:"1",getUrl:function(a){return this.url+"/"+this.version+a},ajax:function(){},verbs:{get:"GET",put:"PUT",post:"POST","delete":"DELETE"}},security:{banner:{url:"/api/banner",getAdminInfo:function(){var a=null;return backand.options.ajax(backand.options.url+backand.security.banner.url,null,backand.options.verbs.post,function(b){a=b},function(a,b,c){console.error(a?a.responseJSON?a.responseJSON.error_description?"ERROR: "+a.responseJSON.error_description:c?"ERROR: "+JSON.stringify(c):"ERROR: Failed to getAdminInfo":"ERROR: "+JSON.stringify(a):c?"ERROR: "+JSON.stringify(c):"ERROR: Failed to getAdminInfo")}),a}},authentication:{url:"/token",token:null,onlogin:null,addLoginEvent:function(a){null==backand.security.authentication.onlogin&&(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(backand.security.authentication.onlogin=document.createEvent("CustomEvent"),backand.security.authentication.onlogin.initCustomEvent("onlogin",!1,!1,{appname:a})):backand.security.authentication.onlogin=new CustomEvent("onlogin",{appname:a}))},login:function(a,b,c,d,e){backand.security.authentication.addLoginEvent(),backand.options.ajax(backand.options.url+backand.security.authentication.url,{grant_type:"password",username:a,password:b,appname:c},backand.options.verbs.post,function(a){backand.security.authentication.token=a.token_type+" "+a.access_token,document.dispatchEvent(backand.security.authentication.onlogin),d&&d(a)},function(a,b,c){e&&a&&e(a,b,c)},!0)}},unlock:function(a,b,c){var d=backand.options.getUrl("/account/unlock");backand.options.ajax(d,JSON.stringify({username:a}),backand.options.verbs.post,b,c)}},api:{app:{url:"/app/config",getConfig:function(a,b){var c=backand.options.getUrl(backand.api.app.url);backand.options.ajax(c,null,backand.options.verbs.get,a,b)}},view:{config:{url:"/view/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.view.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.view.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)},getFieldByName:function(a,b){if(!a.hashFieldsByName){a.hashFieldsByName={};for(var c=0;c<a.fields.length;c++){var d=a.fields[c];a.hashFieldsByName[d.name]=d}}return a.hashFieldsByName[b]}},data:{url:"/view/data/",getItem:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+a+"/"+b),g={deep:c};backand.options.ajax(f,g,backand.options.verbs.get,d,e)},getList:function(a,b,c,d,e,f,g,h,i){var j=backand.options.getUrl(backand.api.view.data.url+a),k={withSelectOptions:b,pageNumber:c,pageSize:d,filter:JSON.stringify(e),sort:JSON.stringify(f),search:g};backand.options.ajax(j,k,backand.options.verbs.get,h,i)},createItem:function(a,b,c,d){var e=backand.options.getUrl(backand.api.view.data.url+a);backand.options.ajax(e,b,backand.options.verbs.post,c,d)},updateItem:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+a+"/"+b);backand.options.ajax(f,c,backand.options.verbs.put,d,e)},deleteItem:function(a,b,c,d){var e=backand.options.getUrl(backand.api.view.data.url+a+"/"+b);backand.options.ajax(e,null,backand.options.verbs.delete,c,d)},autoComplete:function(a,b,c,d,e){var f=backand.options.getUrl(backand.api.view.data.url+"autocomplete/"+a+"/"+b);backand.options.ajax(f,c,backand.options.verbs.get,d,e)}}},dashboard:{config:{url:"/dashboard/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.dashboard.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.dashboard.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)}},data:{url:"/dashboard/data/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.dashboard.data.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)}}},chart:{config:{url:"/chart/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.chart.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.chart.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)}},data:{url:"/chart/data/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.chart.data.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)}}},content:{config:{url:"/content/config/",getItem:function(a,b,c){var d=backand.options.getUrl(backand.api.content.config.url+a);backand.options.ajax(d,null,backand.options.verbs.get,b,c)},getList:function(a,b,c,d,e,f,g,h){var i=backand.options.getUrl(backand.api.content.config.url),j={withSelectOptions:a,pageNumber:b,pageSize:c,filter:JSON.stringify(d),sort:JSON.stringify(e),search:f};backand.options.ajax(i,j,backand.options.verbs.get,g,h)}}}},filter:{item:function(a,b,c){this.fieldName=a,this.operator=b,this.value=c},operator:{numeric:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},date:{equals:"equals",notEquals:"notEquals",greaterThan:"greaterThan",greaterThanOrEqualsTo:"greaterThanOrEqualsTo",lessThan:"lessThan",lessThanOrEqualsTo:"lessThanOrEqualsTo",empty:"empty",notEmpty:"notEmpty"},text:{equals:"equals",notEquals:"notEquals",startsWith:"startsWith",endsWith:"endsWith",contains:"contains",notContains:"notContains",empty:"empty",notEmpty:"notEmpty"},"boolean":{equals:"equals"},relation:{"in":"in"}}},sort:{item:function(a,b){this.fieldName=a,this.order=b},order:{asc:"asc",desc:"desc"}},defaultFieldValue:function(a,b){this.fieldName=a,this.value=b}};backand.filter.item.prototype.constructor=backand.filter.item,backand.filter.item.prototype.fieldName=function(){return this.fieldName},backand.filter.item.prototype.operator=function(){return this.operator},backand.filter.item.prototype.value=function(){return this.value},backand.sort.item.prototype.constructor=backand.sort.item,backand.sort.item.prototype.fieldName=function(){return this.fieldName},backand.sort.item.prototype.order=function(){return this.order},backand.defaultFieldValue.prototype.constructor=backand.defaultFieldValue,backand.defaultFieldValue.prototype.fieldName=function(){return this.fieldName},backand.defaultFieldValue.prototype.value=function(){return this.value},backand.security.authentication.login("nir",123456789,"manager",function(){backand.api.view.data.getList("list")},null),backand.options.ajax=function(a,b,c,d,e,f){$.ajax({url:a,async:!1,type:c,beforeSend:function(a){f||a.setRequestHeader("Authorization",backand.security.authentication.token)},data:b,dataType:"json",cache:!1,error:function(a,b,c){c&&e(a,b,c)},success:function(a,b,c){d&&d(a,b,c)}})};var backandGlobal={url:"http://api.backand.info:8099",defaultApp:null};$(document).ready(function(){angular.element(document).ready(function(){backand.security.authentication.addLoginEvent(),document.dispatchEvent(backand.security.authentication.onlogin)})});var zfill=function(a,b){return(Array(b).join("0")+a).slice(-b)};angular.module("backAnd").factory("dataListService",["$resource",function(a){return a(backandGlobal.url+"/1/:dataType/data/:viewName?pageSize=:pageSize&pageNumber=:pageNumber",{dataType:"view",viewName:"",pageSize:"",pageNumber:"",withSelectOptions:"",filter:"",sort:"",search:""},{read:{method:"GET",params:{callback:"JSON_CALLBACK"}}})}]),angular.module("backAnd").factory("dataItemService",["$resource",function(a){return a(backandGlobal.url+"/1/:dataType/data/:viewName/:id?:qs",{dataType:"view",viewName:"",id:"id",qs:""},{read:{method:"GET",params:{callback:"JSON_CALLBACK"}},create:{method:"POST",params:{callback:"JSON_CALLBACK"}},update:{method:"PUT",params:{callback:"JSON_CALLBACK"}},"delete":{method:"DELETE",params:{callback:"JSON_CALLBACK"}}})}]),angular.module("backAnd").factory("configService",["$resource",function(a){return a(backandGlobal.url+"/1/:dataType/config/:id",{dataType:"view",id:""},{read:{method:"GET",params:{callback:"JSON_CALLBACK"}}})}]),angular.module("backAnd.services").value("version","0.1"),angular.module("backAnd.services").factory("menuService",["$resource",function(a){return a(backandGlobal.url+"/1/app/config",{workspaceId:"workspaceId"},{queryjsonp:{method:"GET",params:{callback:"JSON_CALLBACK"}}})}]),angular.module("backAnd.services").constant("CONSTANTS",{URL:"https://api.backand.com:8080",DEFAULT_APP:null,VERSION:"0.1"}),angular.module("backAnd.services").factory("Global",[function(){var a=this;return a._data={user:window.user,authenticated:!!window.user},a._data}]),angular.module("backAnd").factory("filterService",["$http","$log","Global",function(a,b,c){return{getFilterOptions:function(b,d){c.filterOptions||(c.filterOptions=[]),c.filterOptions[b]?d(c.filterOptions[b]):a.get(backandGlobal.url+"/1/view/data/"+b,{params:{pageSize:1,pageNumber:1,withFilterOptions:!0}}).then(function(a){c.filterOptions[b]=a.data.filterOptions,d(c.filterOptions[b])})}}}]),angular.module("backAnd.controllers").controller("menuController",["$scope","Global","$compile","menuService","$timeout","$rootScope","$http","$location","$route",function(a,b,c,d,e,f,g,h){a.global=b,a.loadMenu=function(b){d.queryjsonp({workspaceId:b},function(b){if(a.currentWorkspace=b.workspace,a.additionalWorkspaces=b.additionalWorkspaces,h.search("workspaceId",b.workspace.id),a.$broadcast("appConfigCompleted",b),e(function(){$(window).trigger("appConfigCompleted",b)}),!h.search().viewName&&!h.search().dashboardId&&!h.search().contentId&&a.currentWorkspace.homePage){var c=a.getHomePage(a.currentWorkspace,a.currentWorkspace.homePage);c&&a.setCurrentMenuSelection(c)}},function(a){401==a.status&&(localStorage.removeItem("Authorization"),window.location.reload())})},a.getHomePage=function(b,c){for(var d=0;d<b.pages.length;d++){var e=b.pages[d];if(e.id==c)return e;if(e.pages)return a.getHomePage(e,c)}return null},a.setCurrentMenuSelection=function(b,c){"table"==b.partType?(h.search({viewName:b.partId,workspaceId:a.currentWorkspace.id}),h.path("/grids")):"dashboard"==b.partType?(h.search({dashboardId:b.partId}),h.path("/dashboard")):"content"==b.partType&&(h.search({contentId:b.partId}),h.path("/content")),a.curTable=b.index,a.setBreadcrumbs(b,c),a.$broadcast("menuItemSelected",b)},a.setBreadcrumbs=function(b,c){a.breadcrumbs=[{name:a.currentWorkspace.name}],c&&a.breadcrumbs.push(c),a.breadcrumbs.push(b)},a.init=function(){if(localStorage.getItem("Authorization")){"/login"==h.$$path&&h.path("/"),g.defaults.headers.common.Authorization=localStorage.getItem("Authorization"),backand.security.authentication.token=g.defaults.headers.common.Authorization;var b=null,c=h.search();c&&c.workspaceId&&(b=c.workspaceId),a.loadMenu(b)}else h.path("/login")}}]),angular.module("backAnd.controllers").controller("profileController",["$scope","Global","menuService","$http",function(a,b,c){a.global=b,a.init=function(){c.queryjsonp({},function(b){a.profile=b.company,a.profile.img=decodeURIComponent(a.profile.logo),a.profile.fullName=b.user.fullName,a.profile.username=b.user.username})},a.logOut=function(){localStorage.removeItem("Authorization"),window.location.reload()}}]),angular.module("backAnd.controllers").controller("signInController",["$scope","Global","$http","$location","$rootScope","$route",function(a,b,c,d){function e(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function f(){if(backandGlobal.defaultApp)return backandGlobal.defaultApp;var a=location.hostname.split(".");return a.length>1?a[0]:""}a.global=b,a.appName=f(),d.search().username&&(a.user=d.search().username),d.search().password&&(a.password=d.search().password),a.waiting=!1,a.authentication=function(){a.loginError="",a.waiting=!0,localStorage.removeItem("Authorization");var b=e({grant_type:"password",username:a.user,password:a.password,appname:a.appName}),f=c({method:"POST",url:backandGlobal.url+"/token",data:b,headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"}});f.success(function(a){c.defaults.headers.common.Authorization=a.token_type+" "+a.access_token,localStorage.setItem("Authorization",c.defaults.headers.common.Authorization),backand.security.authentication.token=c.defaults.headers.common.Authorization,d.path("/"),window.location.reload()}),f.error(function(b,c,d,e){var f="The server is busy. Please contact your administrator or try again later.";b&&b.error_description?f=b.error_description:console.error(f,{data:b,status:c,headers:d,config:e}),a.loginError=f,console.log(c),a.waiting=!1})}}]);var backAndFilters=angular.module("backAnd.filters",[]);backAndFilters.filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]),backAndFilters.directive("isDate",function(){return{require:"ngModel",link:function(a,b,c,d){}}}),backAndFilters.directive("toNumber",function(){return{require:"ngModel",link:function(a,b,c,d){return d.$parsers.push(function(a){return parseFloat(a||"")})}}}),backAndFilters.filter("parseInt",function(){return function(a){return parseInt(a)}}),backAndFilters.filter("removeSpaces",function(){return function(a){return a.replace(" ","")}}),angular.module("backAnd.directives").directive("bkndNgGrid",["Global","dataListService","dataItemService","configService","$filter","filterService","$location","$route","$sce","$compile","$window",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"E",scope:{viewName:"=",options:"=",filterOptions:"=",inputStyle:"=",buttonGroups:"=",disableEditOnDblClick:"="},replace:!1,templateUrl:$(window).width()>768?"backand/js/directives/grids/partials/grid.html":"backand/js/directives/grids/partials/grid-mobile.html",link:function(h){h.global=a,h.isMobile=$(window).width()<768,h.$watch("viewName",function(){h.viewName?(h.viewNameId=h.viewName,h.buildNewGrid(h.viewNameId)):"/grids"==g.$$path&&g.search().viewName&&(h.viewNameId=g.search().viewName,h.buildNewGrid(h.viewNameId))}),h.buildNewGrid=function(a){h.isLoad=!0;d.read({dataType:"view",id:a},function(a){h.$emit("gridConfigCompleted",a),h.configTable=a;var b=$("#bknd-grid_"+h.viewNameId+" .ngGrid").scope();b&&$("#bknd-grid_"+h.viewNameId+" .ngGrid").remove();var c=h.inputStyle?angular.toJson(h.inputStyle).replace(/\"/gi,"'"):"getTableStyle()",d='<div ng-if="dataTable" ng-style="'+c+'" ng-grid="dataTable"></div>',e=angular.element(d),f=j(e),g=f(h);$("#bknd-grid_"+h.viewNameId).append(g),h.setNGGridConfiguration()})},h.setNGGridConfiguration=function(){h.dataTable={},h.columns=[],h.sortOptions={},h.mySelections=[],h.totalServerItems=0,h.pagingOptions={pageSizes:[5,10,15,20,30,50,100,200,500,1e3],pageSize:h.configTable.design.rowsperPage,currentPage:1},h.dataTable={columnDefs:"columns",data:"dataFill",selectedItems:h.mySelections,enablePaging:!0,showFooter:h.configTable&&h.configTable.toolbarSettings.hideFooter?!h.configTable.toolbarSettings.hideFooter:!0,useExternalSorting:!0,sortOptions:h.sortOptions,totalServerItems:"totalServerItems",pagingOptions:h.pagingOptions,rowHeight:h.configTable&&h.configTable.design.rowHeightInPixels?h.configTable.design.rowHeightInPixels:30,headerRowHeight:30,footerRowHeight:47,multiSelect:!1,enableColumnResize:!0,rowTemplate:"<div "+(h.disableEditOnDblClick?"":'ng-dblclick="editSelected(row)" ')+'ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}"><div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div><div ng-cell></div></div>'},h.isMobile&&(h.dataTable.plugins=[new ngGridFlexibleHeightPlugin]),h.global.currentName=h.configTable.captionText,h.showToolbar=h.configTable&&h.configTable.toolbarSettings?!h.configTable.toolbarSettings.hideToolbar:!0,h.showSearch=h.configTable&&h.configTable.design?!h.configTable.design.hideSearchBox:!0,h.showAdd=h.configTable&&h.configTable.dataEditing?h.configTable.dataEditing.allowAdd:!0,h.showEdit=h.configTable&&h.configTable.dataEditing?h.configTable.dataEditing.allowEdit:!0,h.showDelete=h.configTable&&h.configTable.dataEditing?h.configTable.dataEditing.allowDelete:!0,h.showFilter=h.configTable&&!h.configTable.hideFilter,h.collapseFilter=h.configTable&&!h.configTable.collapseFilter,h.filterToolbarOptionsOutput=null,h.showFilter&&f.getFilterOptions(h.viewNameId,function(a){h.$emit("filterToolbarOptionsInput",a,h),h.filterToolbarOptions=a}),h.filterScope=null,h.$on("onfilter",function(a,b,c){h.filterScope=c,h.filterToolbarOptionsOutput=b,h.$emit("filterToolbarOptionsOutput",h.filterToolbarOptionsOutput,h,c),h.getData()}),h.dataTable.footerTemplate=h.isMobile?'<div class="ngFooterPanel" ng-show="showFooter" style="height:{{footerRowHeight}}px;"><div class="col-xs-6 text-left" style="margin-top: 12px;"><span>{{pagingOptions.pageSize * (pagingOptions.currentPage-1) +1}} to {{footerPageMax(pagingOptions.pageSize,pagingOptions.currentPage,maxRows())}} of {{maxRows()}} rows</span></div><div class="col-xs-6 text-right"><pagination style="margin-top:6px;" total-items="maxRows()" ng-model="pagingOptions.currentPage" max-size="0" class="pagination pagination-sm" boundary-links="false" rotate="false" items-per-page="pagingOptions.pageSize"></pagination></div></div>':'<div class="ngFooterPanel" ng-show="showFooter" style="height:{{footerRowHeight}}px;"><div class="col-xs-3 text-left" style="margin-top: 12px;"><span>Showing {{pagingOptions.pageSize * (pagingOptions.currentPage-1) +1}} to {{footerPageMax(pagingOptions.pageSize,pagingOptions.currentPage,maxRows())}} of {{maxRows()}} rows</span></div><div class="col-xs-3 text-right" style="margin-top: 12px;"><span>{{i18n.ngPageSizeLabel}}&nbsp;</span><select class="bkndGridSelect" ng-model="pagingOptions.pageSize" ><option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option></select></div><div class="col-xs-6 text-right"><pagination style="margin-top:6px;" total-items="maxRows()" ng-model="pagingOptions.currentPage" max-size="5" class="pagination-md" boundary-links="true" rotate="false" items-per-page="pagingOptions.pageSize"></pagination></div></div>',h.footerPageMax=function(a,b,c){return Math.min(a*b,c)},h.newButton=h.configTable.description.newButtonName,h.editButton=h.configTable.description.editButtonName,h.deleteButton=h.configTable.description.deleteButtonName,h.setToolbar(),angular.forEach(h.configTable.fields,function(a){a.donotDisplayinGrid||h.columns.push({headerCellTemplate:h.myHeaderCellTemplate(a,h.configTable),cellFilter:a.type,displayName:a.displayName,width:a.columnWidth,cellTemplate:h.getCellTemplate(a,h.configTable)})})},h.setToolbar=function(){h.btnGroups=h.buttonGroups?h.buttonGroups:[{buttons:[{text:h.newButton,iconClass:"glyphicon-plus",callback:h.addRow},{text:h.editButton,iconClass:"glyphicon-pencil",callback:h.editSelected},{text:h.deleteButton,iconClass:"glyphicon-trash",callback:h.deleteSelected}]}],h.$emit("setToolbarCompleted",h.btnGroups,h)},h.showClearFilter=!1,h.getData=function(a){h.isLoad=!0;var c="["+JSON.stringify(h.sortOptions)+"]",d="";d=h.filterOptions?h.filterOptions:g.search().filterOptions?g.search().filterOptions:h.filterToolbarOptionsOutput,"string"==typeof d||d instanceof String||(d=JSON.stringify(d)),b.read({dataType:"view",viewName:h.viewNameId,pageSize:h.pagingOptions.pageSize,pageNumber:h.pagingOptions.currentPage,filter:d,sort:c,search:a},function(b){h.$emit("gridDataCompleted",{config:h.configTable,data:b}),h.dataFill=b.data,h.totalServerItems=b.totalRows,h.isLoad=!1,h.showClearFilter=a||h.filterToolbarOptionsOutput&&h.filterToolbarOptionsOutput.length})},h.filterKeyPress=function(a){13===a.which&&h.activateFilter()},h.activateFilter=function(){var a=h.searchText||null;h.getData(a)},h.deactivateFilter=function(){h.searchText="",h.filterScope&&h.filterScope.reset(),h.getData("")},h.editSelected=function(){return h.isSingleRowSelected()?void(null!=h.mySelections&&1==h.mySelections.length&&(g.search({rowId:h.mySelections[0].__metadata.id,viewName:h.viewNameId}),g.path("/forms"))):void k.alert(l.pleaseSelectRow)},h.addRow=function(){var a=null;if(h.filterOptions){a=[];var b=JSON.parse(h.filterOptions);angular.forEach(b,function(b){var c=new backand.defaultFieldValue(b.fieldName,b.value);a.push(c)})}g.search({viewName:h.viewNameId,defaultFieldsValues:angular.toJson(a)}),g.path("/forms")};var l={pleaseSelectRow:"Please select a row.",confirm:"Are you sure that you want to delete the selected row?",failure:"Failed to delete the row. Please contact your system administrator.",idMissing:"id is missing.",tableMissing:"table is missing."};h.deleteSelected=function(){if(!h.isSingleRowSelected())return void k.alert(l.pleaseSelectRow);if(confirm(l.confirm)){var a=h.getSelectedRowId();if(!a)return console.error(l.idMissing),void k.alert(l.failure);var b=h.viewNameId;if(!b)return console.error(l.tableMissing),void k.alert(l.failure);var d={dataType:"view",id:a,viewName:b};try{c.delete(d,function(){h.getData()},function(a){500==a.status?(console.error(a.data,a),k.alert(l.failure)):(console.warn(a.data,a),k.alert(a.data))})}catch(e){console.error(e.description),k.alert(l.failure)}}},h.isSingleRowSelected=function(){return null!=h.mySelections&&1==h.mySelections.length},h.getSelectedRowId=function(){return h.isSingleRowSelected()?h.mySelections[0].__metadata.id:null},h.myHeaderCellTemplate=function(a,b){return'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{cursor: col.cursor}" ng-class="{ ngSorted: !noSortVisible }"><div ng-click="myCustomSort(col)"  class="ngHeaderText" ng-style="{\'text-align\': \''+h.getTextAlignment(a,b)+'\'}">{{col.displayName}}</div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div><div class="ngSortPriority">{{col.sortPriority}}</div></div><div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>'},h.getTextAlignment=function(a){return"inherit"==a.grid.textAlignment?"Numeric"==a.type||"DateTime"==a.type?"right":"left":a.grid.textAlignment},h.myCustomSort=function(a){a.sortDirection=a.sortDirection&&"asc"!=a.sortDirection?"asc":"desc",h.sortOptions={fieldName:a.displayName,order:a.sortDirection},h.getData()},h.getCellTemplate=function(a,b){var c="";switch(a.type){case"Image":var d=""!=b.design.rowHeightInPixels?b.design.rowHeightInPixels+"px":"auto",e="auto"!=d?"auto":a.columnWidth+"px";c='<div class="ngCellText" ng-class=""><span ng-cell-text><img ng-src="'+a.urlPrefix+"/{{row.entity['"+a.name+'\']}}" width="'+e+'" height="'+d+'" lazy-src/></span></div>';break;case"Html":c="<p ng-bind-html=\"renderHtml('{{row.entity['"+a.name+"']}}')\"></p>";break;case"LongText":c='<div class="ngCellText" ng-class="" style="white-space: normal;"><span ng-cell-text>{{row.entity["'+a.name+'"]}}</span></div>';break;case"Url":c='<div class="ngCellText" ng-class="" ng-style="{\'text-align\': \''+h.getTextAlignment(a,b)+"'}\"><p ng-bind-html=\"renderUrl('{{row.entity['"+a.name+"']}}')\"></p></div>";break;case"MultiSelect":c='<div class="ngCellText" ng-class="" style="white-space: normal;"><a href ng-click="renderSubGridUrl(\''+a.name+"',row.entity.__metadata.id)\">"+a.displayName+"</a></div>";break;default:c='<div class="ngCellText" ng-class="" ng-style="{\'text-align\': \''+h.getTextAlignment(a,b)+'\'}"><span ng-cell-text>{{row.entity["'+a.name+'"]}}</span></div>'}var f={col:a,cellTemplate:c};return h.$emit("setCellTemplate",f),f.cellTemplate},h.renderHtml=function(a){return i.trustAsHtml(a)},h.renderUrl=function(a){var b="";if(""!=a){var c=a.split("|");if(1==c.length)b='<a href="'+c[0]+'" target="_blank">'+c[0]+"</a>";else{var d=void 0!=c[2]?c[2]:"#",e=void 0!=c[1]?c[1]:"_blank",a=void 0!=c[0]?c[0]:d;b='<a href="'+d+'" target="'+e+'">'+a+"</a>"}}return i.trustAsHtml(b)},h.renderSubGridUrl=function(a,b){var c=e("filter")(h.configTable.fields,function(b){return b.name===a})[0];if(c){var d=new backand.filter.item(c.relatedParentFieldName,backand.filter.operator.relation.in,b);g.search({viewName:c.relatedViewName,filterOptions:angular.toJson([d])}),g.path("/grids")}},h.$watch("pagingOptions",function(a,b){a!==b&&h.getData()},!0),h.$watch("filterOptions",function(a,b){a!==b&&h.getData()},!0),h.getTableStyle=function(){var a=void 0!=$(".ngViewport").offset()?$(".ngViewport").offset().top:0,b=0;void 0!=$(".ngFooterPanel").height()&&(b=$(".ngFooterPanel").height());var c=$(window).height()-a-b;return h.collapseFilter&&(c+=-1),c+="px",{height:c}}}}}]).directive("ngBlur",function(){return function(a,b,c){b.bind("blur",function(){a.$apply(c.ngBlur)})}}),angular.module("backAnd.directives").directive("bkndFilter",["$sce",function(a){return{restrict:"A",replace:!0,scope:{filterOptions:"=",showOperators:"="},templateUrl:"backand/js/directives/grids/partials/filter.html",link:function(b){function c(a){var b=document.createElement("div");return b.innerHTML=a,0===b.childNodes.length?"":b.childNodes[0].nodeValue}b.$watch("filterOptions",function(){b.filterOptions&&(b.filterOptionsOutput=angular.copy(b.filterOptions))},!0),b.filterChanged=function(){b.$emit("onfilter",b.getFilter(),b)},b.getFilter=function(){var a=[];return angular.forEach(b.filterOptionsOutput,function(b){b.value&&a.push({fieldName:b.fieldName,operator:b.operator,value:b.value})}),a},b.reset=function(){b.filterOptionsOutput=angular.copy(b.filterOptions),b.$emit("onfilter",b.getFilter(),b)},b.getOperatorSymbol=function(b){var d=null;switch(b){case"equals":d="=";break;case"notEquals":d=a.trustAsHtml(c("&ne;"));break;case"greaterThan":d=a.trustAsHtml(c("&gt;"));break;case"greaterThanOrEqualsTo":d=a.trustAsHtml(c("&ge;"));break;case"lessThan":d=a.trustAsHtml(c("&lt;"));break;case"lessThanOrEqualsTo":d=a.trustAsHtml(c("&le;"));break;case"empty":d=a.trustAsHtml(c("&empty;"));break;case"notEmpty":d=a.trustAsHtml(c("&exist;"));break;case"startsWith":d=a.trustAsHtml(c("&rarr;"));break;case"endsWith":d=a.trustAsHtml(c("&larr;"));break;case"contains":d=a.trustAsHtml(c("&harr;"));break;case"notContains":d="glyphicon glyphicon-align-justify"}return d},b.getOperatorIcon=function(a){var b=null;switch(a){case"equals":b="glyphicon glyphicon-pause";break;case"notEquals":b="glyphicon glyphicon-stop";break;case"greaterThan":b="glyphicon glyphicon-chevron-right";break;case"greaterThanOrEqualsTo":b="glyphicon glyphicon-step-forward";break;case"lessThan":b="glyphicon glyphicon-chevron-left";break;case"lessThanOrEqualsTo":b="glyphicon glyphicon-step-backward";break;case"empty":b="glyphicon glyphicon-remove-circle";break;case"notEmpty":b="glyphicon glyphicon-ok-circle";break;case"startsWith":b="glyphicon glyphicon-align-left";break;case"endsWith":b="glyphicon glyphicon-align-right";break;case"contains":b="glyphicon glyphicon-align-center";break;case"notContains":b="glyphicon glyphicon-align-justify"}return b}}}}]),angular.module("backAnd.directives").directive("bkndDashboard",["Global","$http","configService","$location",function(a,b,c,d){return{restrict:"E",templateUrl:"backand/js/directives/dashboard/partials/dashboard.html",replace:!1,scope:{dashboardId:"=",filterOptions:"="},link:function(a){a.$watch("dashboardId",function(){a.build(a.getDashboardId())}),a.$watch("filterOptions",function(){a.filterOptions&&a.build(a.getDashboardId())},!0),a.getChartFilterOptions=function(){return a.filterOptions?a.toQueryString(a.filterOptions):window.location.href.slice(window.location.href.indexOf("?")+1)},a.getDashboardId=function(){return a.dashboardId?a.dashboardId:d.search().dashboardId?d.search().dashboardId:null},a.toQueryString=function(a){var b=[];return angular.forEach(a,function(a){b.push(a.name+"="+a.value)}),b.join("&")},a.build=function(b){c.read({dataType:"dashboard",id:b},function(b){a.numCol=12/b.columns,a.chartData=[],angular.forEach(b.widgets,function(a){this.push({type:a.type,id:a.__metadata.id})},a.chartData)})}}}}]),angular.module("backAnd.directives").directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]),angular.module("backAnd.directives").directive("customIcon",[function(){return{restrict:"C",scope:{iconType:"="},link:function(a,b){"table"==a.iconType&&b.addClass("fa fa-table"),"dashboard"==a.iconType&&b.addClass("fa fa-dashboard"),"charts"==a.iconType&&b.addClass("fa fa-bar-chart-o"),"content"==a.iconType&&b.addClass("fa fa-th")}}}]),angular.module("backAnd.directives").directive("columnchart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),barColors:["#00a65a","#f56954"],xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),hideHover:"auto",xLabelAngle:45};Morris.Bar(e)})}}}]).directive("linechart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),lineColors:["#3c8dbc"],parseTime:!1,xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),hideHover:"auto",xLabelAngle:45};Morris.Line(e)})}}}]).directive("donutchart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/donutchart.html"},replace:!0,scope:{chartId:"=",filterOptions:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle;var d=0;a.Data[0].data.forEach(function(a){d+=a[1]});var e={element:c.find(".chart"),data:a.Data[0].data.map(function(a){return{label:a[0],value:parseFloat((a[1]/d*100).toFixed(2))}}),colors:["#3c8dbc","#f56954","#00a65a"],hideHover:"auto"};Morris.Donut(e)})}}}]).directive("barchart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),barColors:["#00a65a","#f56954"],xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),horizontal:!0,stacked:!0,hideHover:"auto",xLabelAngle:45};Morris.Bar(e)})}}}]).directive("splinechart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;
var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),lineColors:["#0b62a4","#7A92A3"],parseTime:!1,xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),hideHover:"auto",xLabelAngle:45};Morris.Line(e)})}}}]).directive("areachart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),lineColors:["#0b62a4","#7A92A3"],parseTime:!1,xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),hideHover:"auto",xLabelAngle:45};Morris.Area(e)})}}}]).directive("bubblechart",["dataItemService",function(a){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl||"backand/js/directives/charts/partials/chart.html"},replace:!0,scope:{chartId:"="},link:function(b,c){a.read({dataType:"chart",id:b.chartId,qs:b.filterOptions},function(a){b.title=a.Title,b.subTitle=a.SubTitle,b.xTitle=a.XTitle,b.yTitle=a.YTitle;var d="bcdefghijklmnopqrstuvwxyz",e={element:c.find(".chart"),data:a.xAxis.reduce(function(b,c,e){for(var f={a:c},g=0;g<a.Data.length;g++)f[d.charAt(g)]=a.Data[g].data[e];return b.push(f),b},[]),lineColors:["#0b62a4","#7A92A3"],pointSize:15,lineWidth:0,parseTime:!1,xkey:"a",ykeys:d.substr(0,a.Data.length).split(""),labels:a.Data.map(function(a){return a.name}),hideHover:"auto",xLabelAngle:45};Morris.Line(e)})}}}]),angular.module("backAnd.directives").directive("bkndForm",["$sce","$q","$location","$route","configService","dataItemService","dataListService","$log","Global",function(a,b,c,d,e,f,g,h,i){return{restrict:"AE",transclude:!0,templateUrl:"backand/js/directives/forms/partials/form.html",scope:{viewName:"=",rowId:"=",defaultFieldsValues:"="},link:function(h){h.configInfo={fields:[],categoriesDictionary:{},title:"",id:null};var j=c.search();h.init=function(a){h.isNew=!a.rowId,h.continue=!1;var j=b.defer(),k=b.defer(),l=b.defer();e.read({dataType:"view",id:a.viewName},function(a){j.resolve(a)}),h.isNew||f.read({dataType:"view",viewName:a.viewName,id:a.rowId},function(a){k.resolve(a)});var m=function(){g.read({dataType:"view",viewName:a.viewName,withSelectOptions:!0,filter:null,sort:null,search:null},function(b){l.resolve(b),i.selectOptions||(i.selectOptions=[]),i.selectOptions[a.viewName]||(i.selectOptions[a.viewName]=b.selectOptions)})};if(i.selectOptions||(i.selectOptions=[]),h.isNew){var n={};if(a.defaultFieldsValues){var o=JSON.parse(a.defaultFieldsValues);angular.forEach(o,function(a){n[a.fieldName]=a.value})}i.selectOptions[a.viewName]?b.all([j.promise]).then(function(b){h.processForm(b[0],n,a)}):(m(),b.all([j.promise,l.promise]).then(function(b){h.processForm(b[0],n,a)}))}else i.selectOptions[a.viewName]?b.all([j.promise,k.promise]).then(function(b){h.processForm(b[0],b[1],a)}):(m(),b.all([j.promise,k.promise,l.promise]).then(function(b){h.processForm(b[0],b[1],a)}));h.dataToSubmit=null;var p={failure:"Failed to update the row. Please contact your system administrator.",success:"Data submitted."},q={failure:"Failed to create the row. Please contact your system administrator.",success:"Data submitted."};h.submitCaption=h.isNew?"Create":"Update",h.submitAndContinueCaption=h.isNew?"Create and Continue":"",h.submit=function(){var a=h.isNew?q:p;h.submitAction(a)},h.setFieldValue=function(a){var b=a.value.val;if(void 0!=h.dataToSubmit[a.name]||h.isNew)switch(a.type){case"singleSelect":h.dataToSubmit[a.name]=b&&b.value?b.value:"";break;case"hyperlink":h.dataToSubmit[a.name]=a.value&&a.value.linkText?a.value.linkText+"|"+(a.value.target?"_blank":"_self")+"|"+a.value.url:"";break;case"percentage":h.dataToSubmit[a.name]=a.value&&a.value.val?(b/100).toFixed(2):b;break;default:h.dataToSubmit[a.name]=b?b:""}},h.submitAction=function(b){angular.forEach(h.configInfo.fields,function(a){h.setFieldValue(a)}),angular.forEach(h.configInfo.categories,function(a){angular.forEach(a.fields,function(a){h.setFieldValue(a)})}),h.waiting=!0,h.alerts=[],h.closeAlert=function(a){h.alerts.splice(a,1)};var e=null;e=h.isNew?{dataType:"view",viewName:a.viewName}:{dataType:"view",viewName:a.viewName,id:a.rowId};var g=function(a){h.waiting=!1,500==a.status?(console.error(a.data,a),h.alerts=[{type:"danger",msg:b.failure}]):(console.warn(a.data,a),h.alerts=[{type:"danger",msg:a.data}])};h.isNew?f.create(e,JSON.stringify(h.dataToSubmit),function(b){h.waiting=!1,h.continue?d.reload():(c.search({viewName:a.viewName,rowId:b.__metadata.id}),c.path("/forms"))},g):f.update(e,JSON.stringify(h.dataToSubmit),function(){h.waiting=!1,h.alerts=[{type:"success",msg:b.success}],window.setTimeout(function(){$(".alert").fadeTo(500,0).slideUp(500,function(){$(this).remove()})},5e3)},g)}},h.$watch("viewName",function(){h.init(h.viewName?h.rowId?{viewName:h.viewName,rowId:h.rowId}:{viewName:h.viewName}:j)}),h.processForm=function(a,b,c){h.dataToSubmit=b,h.configInfo.title=a.captionText,h.configInfo.columnsInDialog=a.dataEditing.columnsInDialog,h.configInfo.editable=h.isNew&&a.dataEditing.allowAdd||!h.isNew&&a.dataEditing.allowEdit,angular.forEach(a.fields,function(a){var d,e;switch(a.type){case"Numeric":d="number","Currency"==a.displayFormat?(d="currency",e="$"):d="Percentage"==a.displayFormat?"percentage":"NumberWithSeparator"==a.displayFormat?"numberWithSeparator":"numeric";break;case"DateTime":d="Date_mm_dd"!=a.displayFormat&&"Date_dd_mm"!=a.displayFormat&&"None"!=a.displayFormat&&a.displayFormat?"datetime":"date";break;case"LongText":d="MultiLines"==a.displayFormat?"textarea":"MultiLinesEditor"==a.displayFormat?"editor":"text";break;case"SingleSelect":d="AutoCompleteStratWith"==a.displayFormat||"AutoCompleteMatchAny"==a.displayFormat?"autocomplete":"singleSelect";break;case"MultiSelect":d="Grid"==a.displayFormat?h.isNew?"disabledSubgrid":"subgrid":"CheckList"==a.displayFormat?"multiSelect":"text";break;case"ShortText":d="MultiLines"==a.displayFormat?"textarea":"MultiLinesEditor"==a.displayFormat?"editor":"Hyperlink"==a.displayFormat?"hyperlink":"Email"==a.displayFormat?"email":"Password"==a.displayFormat?"password":"text";break;case"Boolean":d="checkbox";break;case"Url":d="hyperlink";break;case"Email":d="email";break;case"Image":d="image";break;default:d="text"}var f="";f=h.isNew?b[a.name]||a.advancedLayout.defaultValue||"":b[a.name]||"";var g={name:a.name,displayName:a.displayName,type:d,value:{val:f},hr:a.formLayout.addhorizontallineabouvethefield,seperatorTitle:a.formLayout.seperatorTitle,columns:a.formLayout.columnSpanInDialog,preLabel:a.formLayout.preLabel,postLabel:a.formLayout.postLabel,show:h.isNew?!a.form.hideInCreate:!a.form.hideInEdit,disabled:h.isNew?a.form.disableInCreate:a.form.disableInEdit,required:a.advancedLayout.required,viewName:c.viewName,relatedViewName:a.relatedViewName,relatedParentFieldName:a.relatedParentFieldName,minimumValue:a.advancedLayout.minimumValue,maximumValue:a.advancedLayout.maximumValue};if(a.categoryName&&g.show?(h.configInfo.categoriesDictionary[a.categoryName]||(h.configInfo.categoriesDictionary[a.categoryName]={catName:a.categoryName,fields:[]}),h.configInfo.categoriesDictionary[a.categoryName].fields.push(g)):h.configInfo.fields.push(g),"singleSelect"==g.type||"multiSelect"==g.type)i.selectOptions&&i.selectOptions[c.viewName]&&i.selectOptions[c.viewName][g.name]&&(g.options=i.selectOptions[c.viewName][g.name]),g.inlineEditing=h.isNew?a.form.inlineAdding:a.form.inlineEditing;else if("autocomplete"==d)h.isNew?(g.selected=f,f&&(g.value.val=f.value)):g.selected=b.__metadata.autocomplete[g.name];else if("currency"==d)g.currencySymbol=e;else if("hyperlink"==d){var j="",k="",l="";if(b[a.name]){var m=b[a.name].split("|");3==m.length?(j=m[2],k=m[0],l=m[1]):(j=b[a.name],k=b[a.name])}g.value.url=j,g.value.linkText=k,g.value.target=l}else"date"==d?(g.format=a.advancedLayout.format,h.isNew||(g.value.val=b.__metadata.dates[a.name])):"datetime"==d?(g.type="text",h.isNew||(g.value.val=b[a.name]),g.disabled=!0):"percentage"==d?g.value.val=f?100*f:f:"image"==d&&(g.urlPrefix=a.urlPrefix);g.errors={required:"Data required",minimumValue:"Must be more than "+g.minimumValue,maximumValue:"Must be less than "+g.maximumValue,number:"Must be a number",email:"Must be a valid email"},g.filterSubgrid=function(){var a=new backand.filter.item(g.relatedParentFieldName,backand.filter.operator.relation.in,b.__metadata.id);return angular.toJson([a])}}),h.configInfo.categories=[];var d=!0;angular.forEach(a.categories,function(a){h.configInfo.categoriesDictionary[a.name]&&(h.configInfo.categoriesDictionary[a.name].columnsInDialog=a.columnsInDialog,1==h.configInfo.categoriesDictionary[a.name].fields.length&&"subgrid"==h.configInfo.categoriesDictionary[a.name].fields[0].type&&(h.configInfo.categoriesDictionary[a.name].fields[0].hideLabel=!0,h.configInfo.categoriesDictionary[a.name].fields[0].tempRelatedViewName=h.configInfo.categoriesDictionary[a.name].fields[0].relatedViewName,d?d=!1:h.configInfo.categoriesDictionary[a.name].fields[0].relatedViewName=""),h.configInfo.categories.push(h.configInfo.categoriesDictionary[a.name]))}),h.isNew||(h.configInfo.id=b.__metadata.id)},h.renderHtml=function(b){return a.trustAsHtml(b)},h.tabClick=function(a){angular.forEach(a.fields,function(a){a.relatedViewName=a.tempRelatedViewName})}}}}]).filter("parseLabel",function(){return function(a,b){return b&&b.hideLabel?"":a}}).directive("showtab",function(){return{link:function(a,b){b.click(function(a){a.preventDefault(),$(b).tab("show")})}}}),angular.module("backAnd.directives").directive("bkndContent",["Global","$http","configService","$sce","$location",function(a,b,c,d,e){return{restrict:"E",templateUrl:"backand/js/directives/content/partials/content.html",replace:!1,scope:{contentId:"="},link:function(a){a.$watch("contentId",function(){a.contentId?a.setData(a.contentId):e.search().contentId&&a.setData(e.search().contentId)}),a.setData=function(b){c.read({dataType:"content",id:b},function(b){a.content=b})}}}}]),angular.module("backAnd.directives").directive("htmlcontent",["configService",function(a){return{restrict:"E",templateUrl:"backand/js/directives/content/partials/htmlcontent.html",replace:!1,scope:{contentId:"="},link:function(b,c){a.read({dataType:"content",id:b.contentId},function(a){var b=angular.element(a.content);c.append(b)})}}}]),angular.module("backAnd.directives").directive("iframecontent",["configService",function(a){return{restrict:"E",templateUrl:"backand/js/directives/content/partials/iframecontent.html",replace:!1,scope:{contentId:"="},link:function(b,c){b.getDefaultIFrameHeight=function(){var a=$("#id"+b.contentId).position().top,c=$(window).height()-a-50;return c},a.read({dataType:"content",id:b.contentId},function(a){var d=c.find("iframe");d.attr("src",a.iFrameURL),a.width?d.attr("width",a.width):d.attr("width","100%"),a.height?d.attr("height",a.height):d.attr("height",b.getDefaultIFrameHeight()),a.scroll&&d.attr("scrolling","no")})}}}]),angular.module("backAnd.directives").directive("linkcontent",["configService",function(a){return{restrict:"E",replace:!1,scope:{contentId:"="},link:function(b){a.read({dataType:"content",id:b.contentId},function(a){window.open(a.externalLink,"_blank")})}}}]),angular.module("backAnd.directives").directive("textarea",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",errors:"="},templateUrl:"backand/js/directives/textarea/partials/textarea.html",link:function(a){a.value.val||(a.value.val=a.field.defaultValue)}}}]),angular.module("backAnd.directives").directive("input",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/input/partials/input.html",link:function(a){a.value.val||(a.value.val=a.field.defaultValue)}}}]),angular.module("backAnd.directives").directive("singleSelect",["$location",function(a){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/singleSelect/partials/singleSelect.html",link:function(b){b.options=b.field.options,b.value.val&&angular.forEach(b.options,function(a){a.value==b.value.val&&(b.value.val=a)}),b.inlineEditing=function(){a.search({viewName:b.field.relatedViewName}),a.path("/grids")},b.changed=function(){b.value.val.value||(b.value.val=null)}}}}]),angular.module("backAnd.directives").directive("autocomplete",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/autocomplete/partials/autocomplete.html",controller:["$scope","$http",function(a,b){a.options=function(c){return b.get(backandGlobal.url+"/1/view/data/autocomplete/"+a.field.viewName+"/"+a.field.name,{params:{term:c,limit:20}}).then(function(a){return a.data})},a.setPcode=function(b){a.field.value.val=b.value}}],link:function(a){console.log("autocomplete.js",a)}}}]),angular.module("backAnd.directives").directive("editor",["$log",function(a){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",errors:"="},templateUrl:"backand/js/directives/editor/partials/editor.html",link:function(b){b.value.val||(b.value.val=b.field.defaultValue),b.innerVal={val:b.value.val},b.isInFocus=!1,b.inFocus=function(){a.debug("inFocus"),b.isInFocus=!0},b.isEmpty=!b.innerVal.val,b.outFocus=function(){a.debug("outFocus"),b.value.val=b.innerVal.val,b.isEmpty=!b.innerVal.val}}}}]),angular.module("backAnd.directives").directive("checkbox",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/checkbox/partials/checkbox.html",link:function(a){void 0===a.value.val&&(a.value.val=a.field.defaultValue)}}}]),angular.module("backAnd.directives").directive("link",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/link/partials/link.html",link:function(a){a.isTargetBlank="_blank"==a.value.target,a.targetChange=function(){a.value.target=a.isTargetBlank?"_blank":null}}}}]),angular.module("backAnd.directives").directive("date",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/date/partials/date.html",link:function(a){var b=null;a.value.val&&(b="now"==a.value.val.toLowerCase()?new Date:new Date(a.value.val)),a.mydate=b,a.opened=!1,a.open=function(){event.preventDefault(),event.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yy",startingDay:1},a.$watch("mydate",function(b){a.value.val=b?JSON.stringify(b):null}),a.tooEarly=function(){if(!a.field.minimumValue)return!1;var b=moment(a.mydate);return b.isBefore(moment(a.field.minimumValue))},a.tooLate=function(){if(!a.field.maximumValue)return!1;var b=moment(a.mydate);return b.isAfter(moment(a.field.maximumValue))}}}}]),angular.module("backAnd.directives").directive("numeric",["$log",function(a){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/numeric/partials/numeric.html",link:function(b){a.debug("numeric scope",b),b.value.val||(b.value.val=b.field.defaultValue)}}}]),angular.module("backAnd.directives").directive("bkndDisabledGrid",[function(){return{restrict:"AE",replace:!0,scope:{message:"="},templateUrl:"backand/js/directives/grids/partials/disabledGrid.html"}}]),angular.module("backAnd.directives").directive("image",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/image/partials/image.html",link:function(a){a.value.val||(a.value.val=a.field.defaultValue)}}}]),angular.module("backAnd.directives").directive("email",[function(){return{restrict:"A",replace:!0,scope:{field:"=",value:"=",form:"=",inputClass:"=",errors:"="},templateUrl:"backand/js/directives/email/partials/email.html",link:function(a){a.value.val||(a.value.val=a.field.defaultValue)}}}]),angular.module("backAnd.directives").run(["$templateCache",function(a){"use strict";a.put("backand/js/directives/autocomplete/partials/autocomplete.html",'<ng-form name="innerForm">\r\n    <input typeahead-on-select="setPcode($item)" typeahead-editable="false" type="text" name="field" class="form-control" ng-required="field.required" ng-model="field.selected" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass" min-length="2" typeahead="option.label for option in options($viewValue)">\r\n    <div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">Missing</div>\r\n    <div class="alert alert-danger" role="alert" ng-show="!innerForm.field.$valid">Not matched</div>\r\n</ng-form>'),a.put("backand/js/directives/charts/partials/chart.html",'<div class="box">\r\n   <div class="box-header">\r\n        <h3 class="box-title">{{title}}</h3>\r\n        <h4 class="sub-title">{{subTitle}}</h4>\r\n    </div>\r\n    <div class="box-body chart-responsive">\r\n        <div class="chart"></div>\r\n        <div class="xtitle">{{xTitle}}</div>\r\n        <div class="ytitle">{{yTitle}}</div>\r\n    </div>\r\n</div>'),a.put("backand/js/directives/charts/partials/donutchart.html",'<div class="box">\r\n    <div class="box-header">\r\n        <h3 class="box-title">{{title}}</h3>\r\n        <h4 class="sub-title">{{subTitle}}</h4>\r\n    </div>\r\n    <div class="box-body chart-responsive">\r\n        <div class="chart"></div>\r\n    </div>\r\n</div>'),a.put("backand/js/directives/checkbox/partials/checkbox.html",'<input type="checkbox" name="field" class="" ng-model="value.val" ng-checked="value.val" ng-show="field.show" ng-disabled="field.disabled"  ng-class="inputClass" />\r\n	\r\n'),a.put("backand/js/directives/content/partials/content.html",' <div>\r\n    <div ng-switch on="content.pageType">\r\n        <htmlcontent content-id="content.__metadata.id" ng-switch-when="Content">	</htmlcontent>\r\n        <iframecontent content-id="content.__metadata.id" ng-switch-when="IFrame">	</iframecontent>\r\n        <linkcontent content-id="content.__metadata.id" ng-switch-when="External">	</linkcontent>\r\n    </div>\r\n</div>\r\n'),a.put("backand/js/directives/content/partials/htmlcontent.html"," <div>\r\n     <div ></div>\r\n </div>\r\n"),a.put("backand/js/directives/content/partials/iframecontent.html"," <div>\r\n     <iframe ></iframe>\r\n </div>\r\n"),a.put("backand/js/directives/dashboard/partials/dashboard.html",' <div>\r\n 	<div class="container-fluid">	\r\n 		<div data-ng-repeat="chart in chartData">\r\n 			<div class="col-xs-{{numCol}}" ng-switch on="chart.type">\r\n                 <barchart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="Bar" filter-options="getChartFilterOptions()">	</barchart>	\r\n                 <linechart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="Line" filter-options="getChartFilterOptions()">  </linechart>\r\n                 <donutchart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="Pie" filter-options="getChartFilterOptions()"> </donutchart>\r\n                 <columnchart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="Column" filter-options="getChartFilterOptions()"> </columnchart>\r\n                 <splinechart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="spline" filter-options="getChartFilterOptions()">  </splinechart>\r\n                 <areachart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="Area" filter-options="getChartFilterOptions()">  </areachart>\r\n                 <bubblechart chart-id="chart.id" chart-type="{{chart.type}}" ng-switch-when="bubble" filter-options="getChartFilterOptions()">  </bubblechart>\r\n 			</div>\r\n 		</div>\r\n 	</div>\r\n </div>\r\n'),a.put("backand/js/directives/date/partials/date.html",'<div> \r\n  <ng-form name="innerForm">\r\n    <div class="input-group" ng-class="inputClass">\r\n      <input type="text" name="field" class="form-control" datepicker-popup="{{field.format}}" ng-model="mydate" is-open="opened" date-disabled="field.disabled" ng-disabled="field.disabled" ng-required="field.required" close-text="Close" />\r\n      <span class="input-group-btn">\r\n        <button type="button" class="btn btn-default" ng-click="open($event)" ng-disabled="field.disabled"><i class="glyphicon glyphicon-calendar"></i></button>\r\n      </span>\r\n    </div>\r\n    <div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n    <div ng-if="field.minimumValue" class="alert alert-danger" role="alert" ng-show="tooEarly()">{{errors.minimumValue}}</div>\r\n    <div ng-if="field.maximumValue" class="alert alert-danger" role="alert" ng-show="tooLate()">{{errors.maximumValue}}</div>\r\n  </ng-form>\r\n</div>'),a.put("backand/js/directives/editor/partials/editor.html",'<ng-form name="innerForm">\r\n	<text-angular ng-if="!field.disabled" ng-required="field.required" ng-model="innerVal.val" ng-show="field.show" ng-class="inputClass" ng-focus="inFocus()" ng-blur="outFocus()"></text-angular>\r\n	<div ta-bind ng-if="field.disabled"  ng-model="innerVal.val" ng-show="field.show" ng-class="inputClass"></div>\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="isEmpty">{{errors.required}}</div>\r\n</ng-form>'),a.put("backand/js/directives/email/partials/email.html",'<ng-form name="innerForm">\r\n    <div class="input-group">\r\n        <input type="{{field.type}}" name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass" />\r\n        <div class="input-group-addon">\r\n            <i class="fa fa-envelope"></i>\r\n        </div>\r\n    </div>\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n	<div ng-if="field.type == \'email\'" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.email">{{errors.email}}</div>\r\n</ng-form>'),a.put("backand/js/directives/forms/partials/field.html",'\r\n<label ng-hide="field.type == \'checkbox\'">{{field.displayName | parseLabel:field}}</label>\r\n<div ng-switch on="field.type">\r\n    <bknd-ng-grid ng-switch-when="subgrid" view-name="field.relatedViewName" filter-options="field.filterSubgrid()" input-style="{\'height\': 500}"></bknd-ng-grid>\r\n    <div ng-switch-when="disabledSubgrid" bknd-disabled-grid message="\'Save first to add rows\'"></div>\r\n    <div ng-switch-when="singleSelect" single-select field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="autocomplete" autocomplete field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="editor" editor field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="textarea" textarea field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <label ng-switch-when="checkbox" class="checkbox-inline">\r\n        <div checkbox field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        {{field.displayName | parseLabel:field}}\r\n    </label>\r\n    <div ng-switch-when="date" date field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="image" image field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="number" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="currency" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="percentage" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="numberWithSeparator" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="numeric" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="email" email field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    <div ng-switch-when="hyperlink">\r\n        <div link field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    </div>\r\n    <div ng-switch-default input field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n</div>\r\n'),a.put("backand/js/directives/forms/partials/form.html",'<div class="show" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <form role="form" name="form" novalidate ng-submit="submit()">\r\n        <div class="panel panel-default">\r\n            <div class="panel-heading"><h6 class="panel-title">{{configInfo.title}}</h6></div>\r\n            <div class="panel-body">\r\n                <div class="row">\r\n                    <div ng-include="\'backand/js/directives/forms/partials/field.html\'" class="col-md-{{12 / configInfo.columnsInDialog * field.columns | parseInt}} form-group" ng-repeat="field in configInfo.fields" ng-if="field.show">\r\n                        <!-- field -->\r\n                    </div>\r\n                </div>\r\n                <div class="tabbable form-group">\r\n                    <ul class="nav nav-tabs" role="tablist">\r\n                        <li ng-repeat="category in configInfo.categories" ng-class="{active : $first}" ng-click="tabClick(category)">\r\n                            <a href="#{{category.catName | removeSpaces}}" showtab role="tab" data-toggle="tab">{{category.catName}}</a>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="tab-content panel-body">\r\n                        <div class="tab-pane fade in" ng-class="{active : $first}" ng-repeat="category in configInfo.categories" id="{{category.catName | removeSpaces}}" ng-form="subForm">\r\n                            <div ng-include="\'backand/js/directives/forms/partials/field.html\'" class="col-md-{{12 / category.columnsInDialog * field.columns | parseInt}} form-group" ng-repeat="field in category.fields" ng-if="field.show">\r\n                                <!-- field -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="form-actions panel-footer">\r\n                <div class="=col-md-10 text-left">\r\n                    <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)"><span ng-bind-html="alert.msg"></span></alert>\r\n                </div>\r\n                <div class="=col-md-2 text-right">\r\n                    <button type="submit" class="btn btn-primary" ng-show="configInfo.editable && isNew" ng-hide="waiting || !isNew" ng-disabled="form.$invalid" ng-click="continue = true">{{submitAndContinueCaption}}</button>\r\n                    <button type="submit" class="btn btn-primary" ng-show="configInfo.editable" ng-hide="waiting" ng-disabled="form.$invalid" ng-click="continue = false">{{submitCaption}}</button>\r\n                    <img class="img-responsive" ng-show="waiting" src="backand/img/ajax-loader.gif" ng-style="{\'display\':\'inline-block\'}" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<script type="text/ng-template" id="backand/js/directives/forms/partials/field.html">\r\n    <label ng-hide="field.type == \'checkbox\'">{{field.displayName | parseLabel:field}}</label>\r\n    <div ng-switch on="field.type">\r\n        <bknd-ng-grid ng-switch-when="subgrid" view-name="field.relatedViewName" filter-options="field.filterSubgrid()" input-style="{\'height\': 500}"></bknd-ng-grid>\r\n        <div ng-switch-when="disabledSubgrid" bknd-disabled-grid message="\\\'Save first to add rows\\\'"></div>\r\n        <div ng-switch-when="singleSelect" single-select field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="autocomplete" autocomplete field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="editor" editor field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="textarea" textarea field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <label ng-switch-when="checkbox" class="checkbox-inline">\r\n            <div checkbox field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n            {{field.displayName | parseLabel:field}}\r\n        </label>\r\n        <div ng-switch-when="date" date field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="image" image field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="number" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="currency" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="percentage" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="numberWithSeparator" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="numeric" numeric field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="email" email field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        <div ng-switch-when="hyperlink">\r\n            <div link field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n        </div>\r\n        <div ng-switch-default input field="field" value="field.value" form="" input-class="" errors="field.errors"></div>\r\n    </div>\r\n</script>'),a.put("backand/js/directives/grids/partials/buttonGroup.html",'<div ng-repeat="button in buttons">\r\n    <button type="button" ng-click="button.callback()" ng-class="button.class" class="btn btn-default navbar-btn"><span class="glyphicon" ng-class="button.iconClass"><span class="ng-back-grid-toolbar-text">{{button.text}}</span></span></button>\r\n</div>'),a.put("backand/js/directives/grids/partials/disabledGrid.html","<div>\r\n    {{message}}\r\n</div>"),a.put("backand/js/directives/grids/partials/filter.html",'<form name="filterForm" novalidate>\r\n    <div class="panel panel-default">\r\n        <div class="panel-body">\r\n            <div class="row">\r\n                <div ng-repeat="item in filterOptionsOutput">\r\n                    <div ng-switch on="item.fieldType" class="col-md-2 form-group">\r\n                        <label>\r\n                            {{item.label}}\r\n                        </label>\r\n                        <div>\r\n                            <div style="display: inline-block; width: -moz-calc(100% - 50px); width: -webkit-calc(100% - 50px); width: calc(100% - 50px);">\r\n                                <input ng-switch-when="text" type="text" name="item.fieldName" value="item.value" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item" />\r\n                                <input ng-switch-when="date" type="date" name="item.fieldName" value="item.value" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item" />\r\n                                <input ng-switch-when="numeric" type="number" name="item.fieldName" value="item.value" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item" />\r\n                                <input ng-switch-when="boolean" type="checkbox" name="item.fieldName" value="item.value" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item" />\r\n                                <select ng-switch-when="relation" name="item.fieldName" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item">\r\n                                    <option ng-repeat="option in item.selectOptions" value="{{option.value}}">\r\n                                        {{option.name}}\r\n                                    </option>\r\n                                </select>\r\n                                <input ng-switch-default="text" type="text" name="item.fieldName" value="item.value" ng-model="item.value" ng-change="filterChanged()" class="form-control filter-item" />\r\n                            </div>\r\n                            <div class="btn-group" dropdown ng-show="showOperators && item.fieldType != \'relation\' && item.fieldType != \'boolean\'">\r\n                                <button type="button" class="btn btn-primary dropdown-toggle" ng-class="item.value != undefined && item.value != \'\' && item.value != null ? \'selected\' : \'\'" ng-disabled="disabled">\r\n                                    <span>\r\n                                        {{\r\n                                            getOperatorSymbol(item.operator)\r\n                                        }}\r\n                                    </span>\r\n                                </button>\r\n                                <ul class="dropdown-menu" role="menu">\r\n'+"                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'equals'; filterChanged();\" ng-class=\"item.operator == 'equals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('equals')}}</span><span>Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'notEquals'; filterChanged();\" ng-class=\"item.operator == 'notEquals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEquals')}}</span><span>Not Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'greaterThan'; filterChanged();\" ng-class=\"item.operator == 'greaterThan' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('greaterThan')}}</span><span>Greater than</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'greaterThanOrEqualsTo'; filterChanged();\" ng-class=\"item.operator == 'greaterThanOrEqualsTo' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('greaterThanOrEqualsTo')}}</span><span>Greater than or Equals to</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'lessThan'; filterChanged();\" ng-class=\"item.operator == 'lessThan' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('lessThan')}}</span><span>Less than</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'lessThanOrEqualsTo'; filterChanged();\" ng-class=\"item.operator == 'lessThanOrEqualsTo' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol(item.operator)}}</span><span>Less than or Equals to</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'empty'; filterChanged();\" ng-class=\"item.operator == 'empty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('empty')}}</span><span>Empty</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'numeric'\" ng-click=\"item.operator = 'notEmpty'; filterChanged();\" ng-class=\"item.operator == 'notEmpty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEmpty')}}</span><span>Not Empty</span></li>\r\n\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'equals'; filterChanged();\" ng-class=\"item.operator == 'equals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('equals')}}</span><span>Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'notEquals'; filterChanged();\" ng-class=\"item.operator == 'notEquals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEquals')}}</span><span>Not Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'greaterThan'; filterChanged();\" ng-class=\"item.operator == 'greaterThan' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('greaterThan')}}</span><span>Greater than</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'greaterThanOrEqualsTo'; filterChanged();\" ng-class=\"item.operator == 'greaterThanOrEqualsTo' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('greaterThanOrEqualsTo')}}</span><span>Greater than or Equals to</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'lessThan'; filterChanged();\" ng-class=\"item.operator == 'lessThan' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('lessThan')}}</span><span>Less than</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'lessThanOrEqualsTo'; filterChanged();\" ng-class=\"item.operator == 'lessThanOrEqualsTo' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol(item.operator)}}</span><span>Less than or Equals to</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'empty'; filterChanged();\" ng-class=\"item.operator == 'empty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('empty')}}</span><span>Empty</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'date'\" ng-click=\"item.operator = 'notEmpty'; filterChanged();\" ng-class=\"item.operator == 'notEmpty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEmpty')}}</span><span>Not Empty</span></li>\r\n\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'equals'; filterChanged();\" ng-class=\"item.operator == 'equals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('equals')}}</span><span>Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'notEquals'; filterChanged();\" ng-class=\"item.operator == 'notEquals' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEquals')}}</span><span>Not Equals</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'startsWith'; filterChanged();\" ng-class=\"item.operator == 'startsWith' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('startsWith')}}</span><span>Starts With</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'endsWith'; filterChanged();\" ng-class=\"item.operator == 'endsWith' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('endsWith')}}</span><span>Ends With</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'contains'; filterChanged();\" ng-class=\"item.operator == 'contains' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('contains')}}</span><span>Contains</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'empty'; filterChanged();\" ng-class=\"item.operator == 'empty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('empty')}}</span><span>Empty</span></li>\r\n                                    <li ng-show=\"item.fieldType == 'text'\" ng-click=\"item.operator = 'notEmpty'; filterChanged();\" ng-class=\"item.operator == 'notEmpty' ? 'selected' : ''\"><span class=\"filter-operator-symbol\">{{getOperatorSymbol('notEmpty')}}</span><span>Not Empty</span></li>\r\n                                   \r\n                                    \r\n                                </ul>\r\n                            </div>\r\n\r\n                            <div class=\"btn-group\" dropdown ng-show=\"showOperators && (item.fieldType == 'relation' || item.fieldType == 'boolean')\" >\r\n                                <button type=\"button\" class=\"btn btn-primary dropdown-toggle\" ng-disabled=\"disabled\" ng-class=\"item.value != undefined && item.value != '' && item.value != null ? 'selected' : ''\">\r\n                                    <span>\r\n                                        {{\r\n                                        getOperatorSymbol('equals')\r\n                                        }}\r\n                                    </span>\r\n                                </button>\r\n                            </div>\r\n                            </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n"),a.put("backand/js/directives/grids/partials/grid-mobile.html",'<div class="ng-back-grid box" id="bknd-grid_{{viewNameId}}">\r\n    <div class="btn-group btn-group-sm" ng-show="showToolbar">\r\n        <button type="button" ng-click="addRow()" ng-show="showAdd" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-plus"></span></button>\r\n        <button type="button" ng-click="editSelected()" ng-show="showEdit" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-pencil"></span></button>\r\n        <button type="button" ng-click="deleteSelected()" ng-show="showDelete" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-trash"></span></button>\r\n    </div>\r\n    <div class="btn-group btn-group-sm">\r\n        <button type="button" ng-click="activateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-refresh"></span></button>\r\n        <img ng-show="isLoad" src="backand/img/ajax-loader.gif" style="height:30px;margin-top:8px;" />\r\n    </div>\r\n</div>'),a.put("backand/js/directives/grids/partials/grid.html",'<div class="ng-back-grid box" id="bknd-grid_{{viewNameId}}">\r\n    <div class="box-body table-responsive">\r\n        <div class="btn-toolbar ng-back-grid-toolbar" role="toolbar">\r\n            <div ng-repeat="buttonGroup in btnGroups" class="btn-group" ng-class="buttonGroup.class">\r\n                <button ng-repeat="button in buttonGroup.buttons" type="button" ng-click="button.callback()" ng-class="button.class" class="btn btn-default navbar-btn"><span class="glyphicon" ng-class="button.iconClass"><span class="grid-toolbar-text">{{button.text}}</span></span></button>\r\n            </div>\r\n            <div class="btn-group">\r\n                <button type="button" ng-click="activateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-refresh"></span></button>\r\n                <img ng-show="isLoad" src="backand/img/ajax-loader.gif" />\r\n            </div>\r\n            <div class="btn-group pull-right ng-back-grid-toolbar-Search" ng-show="showSearch && showToolbar">\r\n                <input type="text" class="btn btn-default navbar-btn" ng-model="searchText" placeholder="Search" ng-keypress="filterKeyPress($event)" />\r\n                <button type="button" ng-click="activateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-search"></span></button>\r\n                <button type="button" ng-click="deactivateFilter()" class="btn btn-default navbar-btn" ng-style="showClearFilter ? {\'visibility\':\'visible\'} :{\'visibility\':\'hidden\'}"><span class="glyphicon glyphicon-remove"></span></button>\r\n            </div>\r\n            <div class="btn-group pull-right">\r\n                <button type="button" ng-click="collapseFilter=!collapseFilter" class="btn btn-default navbar-btn"><span class="glyphicon " ng-class="collapseFilter ? \'glyphicon-chevron-down\' : \'glyphicon-chevron-up\'"><span class="grid-toolbar-text">{{collapseFilter ? "Filter" : "Filter"}}</span></span></button>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div ng-show="showFilter && !collapseFilter" class="grid-filter">\r\n        <div bknd-filter filter-options="filterToolbarOptions" show-operators="true"></div>\r\n    </div>\r\n\r\n</div>\r\n'),a.put("backand/js/directives/grids/partials/toolbar.html",'<div ng-model="buttonGroups" class="box-body table-responsive">\r\n    <div class="btn-toolbar ng-back-grid-toolbar" role="toolbar">\r\n        <div ng-repeat="buttonGroup in buttonGroups" class="btn-group" ng-class="buttonGroup.class">\r\n            <div button-group buttons="buttonGroup.buttons" selected-rows="selectedRows" new-row-defaults="newRowDefaults" grid-scope="gridScope"></div>\r\n        </div>\r\n        <div class="btn-group">\r\n            <button type="button" ng-click="activateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-refresh"></span></button>\r\n            <img ng-show="isLoad" src="backand/img/ajax-loader.gif" />\r\n        </div>\r\n        <div class="btn-group pull-right ng-back-grid-toolbar-Search" ng-show="showSearch && showToolbar">\r\n            <input type="text" class="btn btn-default navbar-btn" ng-model="searchText" placeholder="Search" ng-keypress="filterKeyPress($event)" />\r\n            <button type="button" ng-click="activateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-search"></span></button>\r\n            <button type="button" ng-click="deactivateFilter()" class="btn btn-default navbar-btn"><span class="glyphicon glyphicon-remove"></span></button>\r\n        </div>\r\n    </div>\r\n</div>\''),a.put("backand/js/directives/html/partials/html.html",'<ng-form name="innerForm">\r\n	<textarea name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass"></textarea>\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n</ng-form>'),a.put("backand/js/directives/image/partials/image.html",'<ng-form name="innerForm">\r\n    <div class="input-group" ng-class="inputClass">\r\n        <input type="text" name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass"></input>\r\n        <span class="input-group-btn" ng-show="!field.largeImage">\r\n            <img ng-src="{{field.urlPrefix}}/{{value.val}}" class="btn btn-default" style="padding: 0; margin-right: 34px; width: 34px;" />\r\n        </span>\r\n    </div>\r\n    <img ng-src="{{field.urlPrefix}}/{{value.val}}" style="width: 300px;" ng-show="field.largeImage" />\r\n\r\n    <div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n    <div ng-if="field.format" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.pattern">{{errors.format}}</div>\r\n</ng-form>'),a.put("backand/js/directives/input/partials/input.html",'<ng-form name="innerForm">\r\n	<input ng-if="field.format" type="{{field.type}}" name="field" class="form-control"  ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled"  ng-class="inputClass" ng-pattern="field.format" />\r\n	<input ng-if="!field.format" type="{{field.type}}" name="field" class="form-control"  ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled"  ng-class="inputClass" />\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n	<div ng-if="field.format" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.pattern">{{errors.format}}</div>\r\n    <div ng-if="field.type == \'email\'" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.email">{{errors.email}}</div>\r\n</ng-form>'),a.put("backand/js/directives/link/partials/link.html",'<ng-form name="innerForm">\r\n    <div class="input-group" ng-class="inputClass">\r\n        <a ng-show="value.url" href="{{value.url}}" target="{{value.target}}" class="form-control">{{value.linkText}}</a>\r\n        <span ng-hide="value.url" class="form-control"></span>\r\n        <span class="input-group-btn">\r\n            <button type="button" class="btn btn-default" data-toggle="modal" data-target="{{ \'#myModal-\' + field.name }}"><i class="fa fa-link"></i></button>\r\n        </span>\r\n    </div>\r\n    <div class="modal fade" data-backdrop="static" id="{{ \'myModal-\' + field.name }}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="form-group">\r\n                        <label for="linkText">Label</label>\r\n                        <input type="text" ng-model="value.linkText" class="form-control" id="linkText" placeholder="Link Text">\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="linkUrl">Url</label>\r\n                        <input type="url" ng-model="value.url" name="editUrl" class="form-control" id="linkUrl" placeholder="http://">\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label for="checkboxOpen">\r\n                            <input type="checkbox" id="checkboxOpen" class="" ng-model="value.target" ng-true-value="null" ng-false-value="_blank">\r\n                            Open in same tab\r\n                        </label>\r\n                    </div>\r\n\r\n                    <div class="alert alert-danger" role="alert" ng-show="innerForm.editUrl.$error.url">{{errors.url}}</div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</ng-form>\r\n'),a.put("backand/js/directives/numeric/partials/numeric.html",'<ng-form name="innerForm">\r\n	<div class="input-group">\r\n      <input type="number" name="field" ng-model="value.val" class="form-control" \r\n		ng-disabled="field.disabled" ng-required="field.required" ng-class="inputClass" ng-show="field.show"\r\n        min="{{field.minimumValue}}" max="{{field.maximumValue}}">\r\n      <div class="input-group-addon">{{ field.type == \'percentage\' ? \'%\' : field.type == \'currency\' ? field.currencySymbol : field.type == \'numberWithSeparator\' ? \'.00\' : \'#\' }}</div>\r\n    </div>\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n	<div class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.number">{{errors.number}}</div>\r\n	<div class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.min">{{errors.minimumValue}}</div>\r\n	<div class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.max">{{errors.maximumValue}}</div>\r\n</ng-form>'),a.put("backand/js/directives/singleSelect/partials/singleSelect.html",'<ng-form name="innerForm">\r\n    <select ng-change="changed()" ng-show="!field.inlineEditing && field.show" name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-disabled="field.disabled" ng-class="inputClass" ng-options="o.name for o in options"></select>\r\n    <div class="input-group" ng-class="inputClass" ng-show="field.inlineEditing">\r\n        <select ng-change="changed()" name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass" ng-options="o.name for o in options"></select>\r\n        <span class="input-group-btn">\r\n            <button type="button" class="btn btn-default" data-toggle="modal" ng-click="inlineEditing()">\r\n                <i class="fa custom-icon ng-isolate-scope fa-table" icon-type="grid"></i>\r\n            </button>\r\n        </span>\r\n    </div>\r\n    <div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n</ng-form>'),a.put("backand/js/directives/textarea/partials/textarea.html",'<ng-form name="innerForm">\r\n	<textarea name="field" class="form-control" ng-required="field.required" ng-model="value.val" ng-show="field.show" ng-disabled="field.disabled" ng-class="inputClass"></textarea>\r\n	<div ng-if="field.required" class="alert alert-danger" role="alert" ng-show="innerForm.field.$error.required">{{errors.required}}</div>\r\n</ng-form>')
}]);